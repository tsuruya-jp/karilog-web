# Karilog Web 技術選定ガイド

## 概要

本ドキュメントでは、Karilog Webで採用可能な技術スタックの比較と推奨案を提示します。

---

## フレームワーク比較

### Option 1: React + Farm（推奨）

#### メリット
- **エコシステムが最も豊富** - ライブラリ、ツール、情報が圧倒的に多い
- **型安全性** - TypeScriptとの統合が優秀
- **超高速な開発体験** - Farmによるミリ秒単位の起動、10ms以内のHMR更新
- **最速のパッケージ管理** - Bunによる高速なインストールとスクリプト実行
- **API連携** - TanStack Queryで宣言的なデータフェッチング
- **フォーム管理** - react-hook-form + Zodで堅牢なフォーム実装
- **カレンダーライブラリ** - FullCalendar、react-big-calendarなど選択肢豊富
- **PDFハンドリング** - react-pdf、pdfmakeなど成熟したライブラリ
- **個人開発向き** - ドキュメントが豊富、問題解決が容易

#### デメリット
- 学習コストがやや高い（特にフック、状態管理）
- FarmとBunは比較的新しいツール（ただし安定版リリース済み）

#### 技術構成
```
- React 19 + TypeScript
- Bun（パッケージマネージャー）
- Farm（Rust製ビルドツール）
- TanStack Router（型安全なルーティング、データローディング機能内蔵）
- TanStack Query（データフェッチ、キャッシュ）
- Zustand（グローバル状態）
- react-hook-form + Zod（フォーム、バリデーション）
- shadcn/ui（UIコンポーネント）
- FullCalendar（カレンダー）
- react-pdf（PDF表示）
- Axios（HTTP通信）
- date-fns（日付処理）
```

#### 推奨理由
1. **圧倒的な開発速度** - FarmのRust製ビルドエンジンとBunの高速実行で開発効率が劇的に向上
2. **型安全なルーティング** - TanStack Routerでコンパイル時にルーティングエラーを防止
3. **実包管理帳簿の複雑なフォーム処理** - react-hook-formで効率的に実装可能
4. **出猟カレンダー** - FullCalendarのReact統合が優秀
5. **API連携** - TanStack Queryでキャッシュ、楽観的更新を簡単に実装
6. **長期保守性** - エコシステムが大きく、将来的な拡張が容易

---

### Option 2: Next.js

#### メリット
- Reactベース（Option 1のメリットを継承）
- ファイルベースルーティング
- App Routerによる最新のReact機能
- SEO最適化（将来的に公開サイト作成時に有利）

#### デメリット
- **SPA用途では過剰** - SSR/SSGが不要な場合、複雑度が増す
- **バックエンド分離済み** - karilog-apiが既に存在するため、Next.js APIルートのメリットなし
- ビルドサイズが大きい

#### 技術構成
```
- Next.js 14 + TypeScript
- App Router
- その他はOption 1と同様
```

#### 適用シーン
- 将来的にSEOが重要になる場合（サービス紹介ページ等）
- サーバーサイドでの事前レンダリングが必要な場合

---

### Option 3: Vue 3

#### メリット
- **学習曲線が緩やか** - テンプレート構文が直感的
- **公式ツールが充実** - Vite、Pinia、Vue Router全て公式
- **Composition API** - Reactフックに似た記述が可能
- **軽量** - バンドルサイズが小さめ

#### デメリット
- エコシステムがReactより小さい
- TypeScript対応がReactより劣る（改善中）
- 日本語情報は多いが、Reactには及ばない

#### 技術構成
```
- Vue 3 + TypeScript + Vite
- Vue Router
- Pinia（状態管理）
- VueUse（ユーティリティ）
- Element Plus / Vuetify（UIライブラリ）
- VueQuery（TanStack Queryの公式Vue版）
- VCalendar（カレンダー）
```

#### 適用シーン
- チーム開発で学習コストを下げたい場合
- テンプレート構文を好む場合

---

### Option 4: Svelte/SvelteKit

#### メリット
- **記述がシンプル** - ボイラープレートが少ない
- **コンパイル型** - ランタイムが不要、バンドルサイズが小さい
- **高速** - パフォーマンスが優秀
- **Reactive構文** - 状態管理が直感的

#### デメリット
- **エコシステムが小さい** - ライブラリの選択肢が限定的
- **日本語情報が少ない** - 問題解決に時間がかかる可能性
- **採用実績が少ない** - 長期保守の観点で不安

#### 技術構成
```
- Svelte 4 / SvelteKit
- TanStack Query（Svelte版）
- Skeleton UI / Flowbite Svelte（UIライブラリ）
```

#### 適用シーン
- 新しい技術に挑戦したい場合
- バンドルサイズを極限まで小さくしたい場合

---

## UIライブラリ比較

### Option 1: shadcn/ui（推奨）

#### メリット
- **コピー&ペースト方式** - 依存関係が最小限
- **カスタマイズ性が高い** - Tailwind CSSベースで自由に変更可能
- **モダンなデザイン** - Radix UIベースで高品質
- **アクセシビリティ** - ARIA属性が適切に実装済み

#### デメリット
- 自前でコンポーネントを管理する必要がある

---

### Option 2: Material-UI (MUI)

#### メリット
- Googleのマテリアルデザイン準拠
- コンポーネントが豊富
- ドキュメントが充実

#### デメリット
- バンドルサイズが大きい
- カスタマイズがやや複雑
- デザインに個性が出にくい

---

### Option 3: Ant Design

#### メリット
- エンタープライズ向けコンポーネントが充実
- テーブル、フォームが強力
- 日本語対応

#### デメリット
- デザインが中国風（好みによる）
- バンドルサイズが大きい

---

## 状態管理比較

### サーバー状態: TanStack Query（推奨）

#### メリット
- **API連携に最適化** - フェッチ、キャッシュ、再検証を自動化
- **楽観的更新** - UX向上に貢献
- **型安全** - TypeScriptフル対応
- **DevTools** - デバッグが容易

#### 代替: SWR（Next.js開発元のVercel製）
- TanStack Queryとほぼ同等の機能
- Next.jsとの親和性が高い

---

### クライアント状態: Zustand（推奨）

#### メリット
- **シンプル** - ボイラープレートが最小限
- **軽量** - バンドルサイズが小さい
- **型安全** - TypeScriptフレンドリー
- **React外でも使用可能** - ユーティリティ関数から直接アクセス可

#### 代替1: Redux Toolkit
- 大規模アプリ向け
- ボイラープレートが多い
- 本プロジェクトには過剰

#### 代替2: Jotai / Recoil
- Atomベースの状態管理
- React Suspenseと統合
- 学習コストやや高め

---

## フォーム管理比較

### react-hook-form + Zod（推奨）

#### メリット
- **宣言的** - バリデーションスキーマを型として定義
- **パフォーマンス** - 非制御コンポーネントで再レンダリング最小限
- **型安全** - ZodスキーマからTypeScript型を自動生成
- **エラーハンドリング** - フィールドごとのエラー表示が容易

#### 代替: Formik
- 老舗ライブラリ
- 制御コンポーネントベース
- react-hook-formより再レンダリングが多い

---

## カレンダーライブラリ比較

### FullCalendar（推奨）

#### メリット
- **機能豊富** - イベント登録、編集、ドラッグ&ドロップ
- **カスタマイズ性** - 外観を柔軟に変更可能
- **公式React統合** - @fullcalendar/reactで簡単に導入
- **月次・週次・日次ビュー** - 複数の表示形式

#### 代替1: react-big-calendar
- シンプルなカレンダー
- FullCalendarより軽量
- 機能はやや限定的

#### 代替2: react-calendar
- 日付選択に特化
- 出猟カレンダーには機能不足

---

## ルーティングライブラリ比較

### TanStack Router（推奨）

#### メリット
- **完全な型安全性** - パス、パラメータ、検索クエリが全て型推論される
- **コンパイル時エラー検出** - 存在しないルートへのナビゲーションを防止
- **データローディング機能内蔵** - ルートレベルでのデータフェッチング、キャッシング
- **TanStack Queryとの統合** - シームレスな連携で複雑なデータフローを簡素化
- **検索パラメータの型安全性** - URLクエリパラメータも型チェックされる
- **優れたDevTools** - ルート構造やローダーの状態を可視化
- **パフォーマンス最適化** - Structural sharingによる再レンダリング最小化
- **ファイルベースルーティング** - オプションで利用可能（Next.js風）

#### デメリット
- 学習コストがやや高い
- コミュニティがReact Routerより小さい
- TypeScriptが必須

#### 適用シーン
- TypeScriptをメインで使用するプロジェクト
- 型安全性を重視する大規模アプリケーション
- ルーティングとデータフェッチングを統合したい場合
- コンパイル時にルーティングエラーを防ぎたい場合

---

### React Router（代替案）

#### メリット
- **成熟したエコシステム** - 長年の実績と大規模コミュニティ
- **豊富なドキュメント** - 情報が多く、問題解決が容易
- **シンプルな学習曲線** - 基本的な使い方は直感的
- **Remixとの統合** - 将来的にフルスタックフレームワークへ移行可能

#### デメリット
- 型安全性が限定的 - 手動で型アサーションが必要
- データローディングは別途実装が必要
- ルートパラメータの型推論なし

#### 適用シーン
- JavaScriptメインのプロジェクト
- シンプルなSPA
- 既存のReact Routerプロジェクトのメンテナンス

---

## ビルドツール比較

### Farm（推奨）

#### メリット
- **圧倒的な速度** - Rust製により、ミリ秒単位でプロジェクト起動
- **超高速HMR** - ほとんどの状況で10ms以内のホットモジュール更新
- **増分ビルド** - モジュールレベルのキャッシュがデフォルト有効
- **部分バンドリング** - キャッシュ粒度を失わずリソース読み込みを最適化
- **Viteプラグイン互換** - 既存のViteプラグインが使用可能
- **優れたDevTools** - ビルド状態の可視化

#### デメリット
- 比較的新しいツール（ただし安定版リリース済み）
- Viteと比較してコミュニティは小さい
- 日本語情報が少ない

#### 適用シーン
- ビルド速度を最優先したい場合
- 大規模プロジェクトでの開発効率向上
- モダンな開発環境を構築したい場合

---

### Vite（代替案）

#### メリット
- **成熟したエコシステム** - 大規模コミュニティと豊富なプラグイン
- **高速な開発サーバー** - ESMベースで高速起動
- **優れたドキュメント** - 日本語含め情報が豊富
- **幅広い採用実績** - 多くのプロジェクトで使用されている

#### デメリット
- Farmと比較すると起動・HMR速度で劣る
- JavaScriptベースの実行速度の限界

#### 適用シーン
- 安定性と実績を重視する場合
- 豊富なプラグインエコシステムが必要な場合

---

## パッケージマネージャー比較

### Bun（推奨）

#### メリット
- **圧倒的な速度** - npm/yarn/pnpmより大幅に高速なインストール
- **オールインワン** - ランタイム、パッケージマネージャー、テストランナー、バンドラーを統合
- **npm互換** - 既存のnpmパッケージをそのまま使用可能
- **高速なスクリプト実行** - Zigで実装された高速ランタイム
- **内蔵機能** - テスト、トランスパイル、バンドルを追加ツールなしで実行

#### デメリット
- 比較的新しいツール（ただし安定版リリース済み）
- 一部のnpmパッケージで互換性の問題がある可能性
- Windowsサポートは実験的段階

#### 適用シーン
- 開発速度を最優先したい場合
- モダンな開発環境を構築したい場合
- macOS/Linuxでの開発

---

### npm/yarn/pnpm（代替案）

#### メリット
- **広く採用されている** - デファクトスタンダード
- **高い互換性** - ほぼすべてのパッケージで動作
- **豊富な情報** - トラブルシューティングが容易
- **クロスプラットフォーム** - Windows含め全環境で安定動作

#### デメリット
- Bunと比較してインストール・実行速度が遅い

#### 適用シーン
- 安定性と互換性を最優先する場合
- Windows環境での開発
- チーム開発で標準ツールを使いたい場合

---

## 推奨構成まとめ

```
フレームワーク:       React 19 + TypeScript
パッケージマネージャー: Bun（高速インストール＆実行）
ビルドツール:         Farm（Rust製、超高速ビルド）
ルーティング:         TanStack Router（型安全、データローディング内蔵）
状態管理:
  - サーバー:         TanStack Query
  - クライアント:     Zustand
UIライブラリ:         shadcn/ui + Tailwind CSS
フォーム:             react-hook-form + Zod
カレンダー:           FullCalendar
PDF:                  react-pdf
HTTP:                 Axios
日付:                 date-fns
開発ツール:           ESLint, Prettier
テスト:               Bun test
```

---

## 技術選定の判断基準

1. **個人開発** - 情報が多く、問題解決しやすいか
2. **長期保守性** - エコシステムが大きく、将来も使われ続けるか
3. **型安全性** - TypeScriptとの統合が優秀か
4. **パフォーマンス** - 快適なUXを提供できるか
5. **学習コスト** - 開発者が習得しやすいか

---

## 変更履歴

| バージョン | 日付 | 内容 |
|------------|------|------|
| 1.2 | 2025-12-04 | パッケージマネージャーをBunに、ビルドツールをFarmに変更、詳細比較を追加 |
| 1.1 | 2025-12-04 | ルーティングをReact Router v6からTanStack Routerに変更、詳細比較を追加 |
| 1.0 | 2025-12-01 | 初版作成 |
